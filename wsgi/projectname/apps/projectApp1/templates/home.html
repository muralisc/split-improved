{% extends 'base.html' %}
{% block title %}
{% endblock %}

{% block ngAppName %} ng-app="YourAppName" {% endblock %}

{% block header %}
{% include "navbar.html" %}
{% endblock %}


{% block body %}
<div class="span2">
{% include "navlist.html" %}
</div>
<div class="span6">
	<div class="row-fluid">
		CREATE GROUP <br/>
		<form name="groupCreate" class="form form-horizontal" action="/createGroup/" method="post">{% csrf_token %}   
			<label for="id_name">Name:</label> <input id="id_name" type="text" name="name" maxlength="64" />
			<!--<label for="id_description">Description:</label> <input id="id_description" type="text" name="description" maxlength="564" />-->
			<label for="id_members">Members:</label> 
			<input name="members" id="id_members"type="text" id="tokeninput-demo" /><br/>
			{{form.privacy}}
			<input class="btn" type="submit" name="Create" value="Create"/>
		</form>
        {% include "filterController.html" %}
        {% include "timeFilter.html" %}
        <table class="table table-hover table-condensed">
            <thead>
                <tr>
                    <th>group name</th>
                    <th>outstanding amount</th>
                    <th>Expense</th>
                    <th>Paid amount</th>
                </tr>
            </thead>
            <tbody>
                {%for i in group_list%}
                <tr>
                    <td><a href="/group/{{i.0.id}}">{{i.0.name}}</a></td>
                    <td>
                        <a href="/group/outstandingList/?u={{i.0.user.id}}&ts={{start_time|date:'Y-m-d'}}&te={{end_time|date:'Y-m-d'}}" 
                            rel="tooltip" data-placement="right" data-original-title="How did this come?">{{i.1|floatformat}}</a>
                    </td>
                    <td>
                        <a href="/group/expenseList/?u={{i.0.user.id}}&ts={{start_time|date:'Y-m-d'}}&te={{end_time|date:'Y-m-d'}}"
                            rel="tooltip" data-placement="right" data-original-title="How did this come?">{{i.2|floatformat}}</a>
                    </td>
                    <td>
                        <a href="/group/paidList/?u={{i.0.user.id}}&ts={{start_time|date:'Y-m-d'}}&te={{end_time|date:'Y-m-d'}}"
                            rel="tooltip" data-placement="right" data-original-title="How did this come?" >{{i.3|floatformat}}</a>
                    </td>
                </tr>
                {%endfor%}
            </tbody>
        </table>
	</div>
</div>
{% endblock %}


{% block footer%}
{% endblock %}


{% block afterbody%}
<script>
	$(document).ready(function() {
		//token input function to get the users for dropdown to create group
		$("#id_members").tokenInput("/getJSON/users/", {
			theme: "facebook",
			hintText: "Search Friends",
			noResultsText: "O results",
			searchingText: "searching Friends",
			preventDuplicates: true
		});	
	});
</script>
<link rel="stylesheet" href="http://loopj.com/jquery-tokeninput/styles/token-input-facebook.css" type="text/css" media="screen" charset="utf-8" />
<script src="https://github.com/loopj/jquery-tokeninput/raw/master/src/jquery.tokeninput.js" type="text/javascript" charset="utf-8"></script>
{% endblock %}
